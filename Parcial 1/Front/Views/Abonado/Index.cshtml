@using Entidades;
@using Negocio;

<div class="jumbotron">
	<h1>Abonados</h1>
</div>

<div class="row">
	<div class="col-12">
		<a href="/Abonado/Crear" class="btn btn-outline-success">Crear</a>
		<table class="table">
			<thead>
				<tr>
					<th scope="col">#</th>
					<th scope="col">Numero</th>
					<th scope="col">Nombre</th>
					<th scope="col">DNI</th>
					<th scope="col">Tipo</th>
					<th scope="col"></th>
				</tr>
			</thead>
			<tbody>
				@foreach (Abonado abonado in new AbonadoBl().listar()) {
					<tr>
						<th scope="row">@abonado.id</th>
						<td>@abonado.numero</td>
						<td>@abonado.nombre</td>
						<td>@abonado.dni</td>
						<td>@abonado.tipo.ToString()</td>
						<td>
							<button onclick="eliminar(@abonado.idAbonado)" type="button" class="btn btn-outline-danger">❌</button>
							<a href="/Abonado/Edit/@abonado.idAbonado" class="btn btn-outline-secondary">✏</a>
						</td>
					</tr>
				}
			</tbody>
		</table>
	</div>
</div>

<script>
	const eliminar = async (id) => {
		await get('/Abonado/EliminarAbonado/' + id);
		location.reload();
	}
</script>